<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Install BlackLab standalone on MacOS (by Dirk Roorda) | BlackLab</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="Documentation for the corpus search engine BlackLab">
    
    <link rel="preload" href="/BlackLab/assets/css/0.styles.5760bb18.css" as="style"><link rel="preload" href="/BlackLab/assets/js/app.ff7e0bdb.js" as="script"><link rel="preload" href="/BlackLab/assets/js/2.3a027c82.js" as="script"><link rel="preload" href="/BlackLab/assets/js/42.0465a6b1.js" as="script"><link rel="prefetch" href="/BlackLab/assets/js/10.a97bc1f2.js"><link rel="prefetch" href="/BlackLab/assets/js/11.891fe32f.js"><link rel="prefetch" href="/BlackLab/assets/js/12.2db99efc.js"><link rel="prefetch" href="/BlackLab/assets/js/13.e93eed8a.js"><link rel="prefetch" href="/BlackLab/assets/js/14.9364ad4a.js"><link rel="prefetch" href="/BlackLab/assets/js/15.405632c8.js"><link rel="prefetch" href="/BlackLab/assets/js/16.f3063769.js"><link rel="prefetch" href="/BlackLab/assets/js/17.06d27b1c.js"><link rel="prefetch" href="/BlackLab/assets/js/18.b90032a5.js"><link rel="prefetch" href="/BlackLab/assets/js/19.1cd8af9b.js"><link rel="prefetch" href="/BlackLab/assets/js/20.42bb357a.js"><link rel="prefetch" href="/BlackLab/assets/js/21.6b25d228.js"><link rel="prefetch" href="/BlackLab/assets/js/22.577e00a3.js"><link rel="prefetch" href="/BlackLab/assets/js/23.18694c3e.js"><link rel="prefetch" href="/BlackLab/assets/js/24.3f96f03f.js"><link rel="prefetch" href="/BlackLab/assets/js/25.ebeb39f6.js"><link rel="prefetch" href="/BlackLab/assets/js/26.afa2791a.js"><link rel="prefetch" href="/BlackLab/assets/js/27.bbc1ac3e.js"><link rel="prefetch" href="/BlackLab/assets/js/28.1607f8a7.js"><link rel="prefetch" href="/BlackLab/assets/js/29.74d0eb7f.js"><link rel="prefetch" href="/BlackLab/assets/js/3.dd448380.js"><link rel="prefetch" href="/BlackLab/assets/js/30.d69bc359.js"><link rel="prefetch" href="/BlackLab/assets/js/31.8d716075.js"><link rel="prefetch" href="/BlackLab/assets/js/32.a0ff5456.js"><link rel="prefetch" href="/BlackLab/assets/js/33.c497f89b.js"><link rel="prefetch" href="/BlackLab/assets/js/34.43fcfa33.js"><link rel="prefetch" href="/BlackLab/assets/js/35.57d60f91.js"><link rel="prefetch" href="/BlackLab/assets/js/36.6b5464f5.js"><link rel="prefetch" href="/BlackLab/assets/js/37.aa245bfb.js"><link rel="prefetch" href="/BlackLab/assets/js/38.e2221bf1.js"><link rel="prefetch" href="/BlackLab/assets/js/39.f9614a8f.js"><link rel="prefetch" href="/BlackLab/assets/js/4.250fd8f2.js"><link rel="prefetch" href="/BlackLab/assets/js/40.3e881176.js"><link rel="prefetch" href="/BlackLab/assets/js/41.19e38ff0.js"><link rel="prefetch" href="/BlackLab/assets/js/43.2c80d081.js"><link rel="prefetch" href="/BlackLab/assets/js/44.43625a55.js"><link rel="prefetch" href="/BlackLab/assets/js/45.b5cea120.js"><link rel="prefetch" href="/BlackLab/assets/js/46.1b676431.js"><link rel="prefetch" href="/BlackLab/assets/js/47.85c2d39e.js"><link rel="prefetch" href="/BlackLab/assets/js/48.08158648.js"><link rel="prefetch" href="/BlackLab/assets/js/49.a4c61ca8.js"><link rel="prefetch" href="/BlackLab/assets/js/5.7080f60e.js"><link rel="prefetch" href="/BlackLab/assets/js/50.c78858d5.js"><link rel="prefetch" href="/BlackLab/assets/js/51.463bae8c.js"><link rel="prefetch" href="/BlackLab/assets/js/52.458bbe5f.js"><link rel="prefetch" href="/BlackLab/assets/js/53.39e9deef.js"><link rel="prefetch" href="/BlackLab/assets/js/54.425b4f2a.js"><link rel="prefetch" href="/BlackLab/assets/js/55.50c2c79a.js"><link rel="prefetch" href="/BlackLab/assets/js/56.eec17177.js"><link rel="prefetch" href="/BlackLab/assets/js/57.306ac3df.js"><link rel="prefetch" href="/BlackLab/assets/js/58.10fb9202.js"><link rel="prefetch" href="/BlackLab/assets/js/59.a192a7eb.js"><link rel="prefetch" href="/BlackLab/assets/js/6.bb3d2c40.js"><link rel="prefetch" href="/BlackLab/assets/js/60.8ff3f063.js"><link rel="prefetch" href="/BlackLab/assets/js/61.91d2ba44.js"><link rel="prefetch" href="/BlackLab/assets/js/62.f8d7a455.js"><link rel="prefetch" href="/BlackLab/assets/js/63.ba9049be.js"><link rel="prefetch" href="/BlackLab/assets/js/64.a10a4e4f.js"><link rel="prefetch" href="/BlackLab/assets/js/65.ab9870d5.js"><link rel="prefetch" href="/BlackLab/assets/js/66.b1a55608.js"><link rel="prefetch" href="/BlackLab/assets/js/67.c8966fb0.js"><link rel="prefetch" href="/BlackLab/assets/js/68.a0110da1.js"><link rel="prefetch" href="/BlackLab/assets/js/69.190cdd43.js"><link rel="prefetch" href="/BlackLab/assets/js/7.fe78c9fd.js"><link rel="prefetch" href="/BlackLab/assets/js/70.af6f5588.js"><link rel="prefetch" href="/BlackLab/assets/js/71.accb48b7.js"><link rel="prefetch" href="/BlackLab/assets/js/72.7d196c93.js"><link rel="prefetch" href="/BlackLab/assets/js/73.28b0fde7.js"><link rel="prefetch" href="/BlackLab/assets/js/74.60eed0ed.js"><link rel="prefetch" href="/BlackLab/assets/js/8.9dedd2e9.js"><link rel="prefetch" href="/BlackLab/assets/js/9.e6659fc6.js">
    <link rel="stylesheet" href="/BlackLab/assets/css/0.styles.5760bb18.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/BlackLab/" class="home-link router-link-active"><!----> <span class="site-name">BlackLab</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/BlackLab/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/BlackLab/server/" class="nav-link router-link-active">
  Webservice
</a></div><div class="nav-item"><a href="/BlackLab/frontend/" class="nav-link">
  Frontend
</a></div><div class="nav-item"><a href="/BlackLab/development/" class="nav-link">
  Developers
</a></div> <a href="https://github.com/INL/BlackLab" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/BlackLab/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/BlackLab/server/" class="nav-link router-link-active">
  Webservice
</a></div><div class="nav-item"><a href="/BlackLab/frontend/" class="nav-link">
  Frontend
</a></div><div class="nav-item"><a href="/BlackLab/development/" class="nav-link">
  Developers
</a></div> <a href="https://github.com/INL/BlackLab" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/BlackLab/server/" aria-current="page" class="sidebar-link">BlackLab Server</a></li><li><a href="/BlackLab/server/overview.html" class="sidebar-link">How to use</a></li><li><a href="/BlackLab/server/rest-api/" class="sidebar-link">API reference</a></li><li><a href="/BlackLab/server/from-different-languages.html" class="sidebar-link">Using from different languages</a></li><li><a href="/BlackLab/server/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/BlackLab/server/howtos.html" class="sidebar-link">Tutorials / howtos</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="install-blacklab-standalone-on-macos-by-dirk-roorda"><a href="#install-blacklab-standalone-on-macos-by-dirk-roorda" class="header-anchor">#</a> Install BlackLab standalone on MacOS (by Dirk Roorda)</h1> <blockquote><p>This guide was written by Dirk Roorda for the CLARIAH project General Missives project. This is a slightly edited (top heading, other heading levels) archived version; the original can be found <a href="https://github.com/CLARIAH/wp6-missieven/blob/master/blacklab/install.md" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It is licensed under the MIT license.</p></blockquote> <h2 id="about"><a href="#about" class="header-anchor">#</a> About</h2> <p>This document describes how to install a working Blacklab server and client
on a standalone machine running
macos.</p> <h2 id="toc"><a href="#toc" class="header-anchor">#</a> TOC</h2> <ul><li>Prerequisites
<ul><li>Requirements</li> <li>Java</li> <li>Tomcat
<ul><li>Run Tomcat</li> <li>Manage TomCat
<ul><li>Set up managers</li></ul></li></ul></li></ul></li> <li>Blacklab
<ul><li>File organization
<ul><li>Explanation</li></ul></li> <li>Server
<ul><li>Configure</li> <li>Example corpus</li> <li>Deploy within TomCat</li> <li>Test the query tool</li></ul></li> <li>Client</li></ul></li></ul> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <h3 id="requirements"><a href="#requirements" class="header-anchor">#</a> Requirements:</h3> <ul><li>macos 10.15.7 or higher (Catalina), earlier probably works as good</li> <li>Commandline tools installed (part of XCode)
<code>xcode-select --install</code></li> <li><a href="https://brew.sh" target="_blank" rel="noopener noreferrer">HomeBrew<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (a macos package manager)</li></ul> <h3 id="java"><a href="#java" class="header-anchor">#</a> JAVA</h3> <p>We use Homebrew to install a Java Development Kit (JDK), from an open source,
using a mechanism of HomeBrew that is optimized for large binaries.</p> <div class="language- extra-class"><pre class="language-text"><code>brew update
brew tap homebrew/cask
brew cask install adoptopenjdk
java -version
</code></pre></div><p>Results in:</p> <div class="language- extra-class"><pre class="language-text"><code>openjdk version &quot;15&quot; 2020-09-15
OpenJDK Runtime Environment AdoptOpenJDK (build 15+36)
OpenJDK 64-Bit Server VM AdoptOpenJDK (build 15+36, mixed mode, sharing)
</code></pre></div><h3 id="tomcat"><a href="#tomcat" class="header-anchor">#</a> TOMCAT</h3> <p>We install both TomCat and its native library, in order to get access to SSL.</p> <div class="language- extra-class"><pre class="language-text"><code>brew install tomcat
brew install tomcat-native
</code></pre></div><p>We get a notification:</p> <div class="language- extra-class"><pre class="language-text"><code>In order for tomcat's APR lifecycle listener to find this library, you'll
need to add it to java.library.path. This can be done by adding this line
to $CATALINA_HOME/bin/setenv.sh

  CATALINA_OPTS=&quot;$CATALINA_OPTS -Djava.library.path=/usr/local/opt/tomcat-native/lib&quot;

If $CATALINA_HOME/bin/setenv.sh doesn't exist, create it and make it executable.
</code></pre></div><p><strong>N.B</strong> This <code>CATALINA</code> is a code name for TomCat and has nothing to do with the current
macos version 10.15, also named <code>Catalina</code>.</p> <p>OK, it appears that</p> <p><code>CATALINA_HOME</code> is <code>/usr/local/Cellar/tomcat/9.0.40/libexec</code>
although there is no CATALINA_HOME visible to the shell.
You can either set such a variable and use it in the ocmmands below, or spell
the value out.</p> <p>It seems that it is not needed to set this variable for TomCat to work.</p> <p>Depending on whether you have chosen to set <code>CATALINA_HOME</code> in your shell
say either</p> <div class="language- extra-class"><pre class="language-text"><code>vim $CATALINA_HOME/bin/setenv.sh
</code></pre></div><p>or</p> <div class="language- extra-class"><pre class="language-text"><code>vim /usr/local/Cellar/tomcat/9.0.40/libexec/bin/setenv.sh
</code></pre></div><p>and add the line</p> <div class="language- extra-class"><pre class="language-text"><code>CATALINA_OPTS=&quot;$CATALINA_OPTS -Djava.library.path=/usr/local/opt/tomcat-native/lib&quot;
</code></pre></div><p>Then</p> <p>either</p> <div class="language- extra-class"><pre class="language-text"><code>chmod ugo+x $CATALINA_HOME/bin/setenv.sh
</code></pre></div><p>or</p> <div class="language- extra-class"><pre class="language-text"><code>chmod ugo+x /usr/local/Cellar/tomcat/9.0.40/libexec/bin/setenv.sh
</code></pre></div><h4 id="run-tomcat"><a href="#run-tomcat" class="header-anchor">#</a> Run TOMCAT</h4> <p>There are several ways to run TomCat:</p> <p>As a service that starts when the Mac starts:</p> <div class="language- extra-class"><pre class="language-text"><code>brew services start tomcat
</code></pre></div><p>Manually</p> <div class="language- extra-class"><pre class="language-text"><code>catalina run
</code></pre></div><p>and stop it by <code>Ctrl-C</code>.</p> <p>As a background process:</p> <div class="language- extra-class"><pre class="language-text"><code>catalina start
</code></pre></div><p>and stop it with</p> <div class="language- extra-class"><pre class="language-text"><code>catalina stop
</code></pre></div><p>See also</p> <div class="language- extra-class"><pre class="language-text"><code>catalina -h
</code></pre></div><h4 id="manage-tomcat"><a href="#manage-tomcat" class="header-anchor">#</a> Manage TOMCAT</h4> <p>In the browser, navigate to</p> <p>http://localhost:8080</p> <p>You should see a page that says that you have successfully installed TomCat.</p> <h5 id="set-up-managers"><a href="#set-up-managers" class="header-anchor">#</a> Set up managers</h5> <p>See the users in</p> <div class="language- extra-class"><pre class="language-text"><code>cd /usr/local/Cellar/tomcat/9.0.40/libexec 
vim conf/tomcat-users.xml
</code></pre></div><p>and add the lines</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;role rolename=&quot;manager-gui&quot;/&gt;
&lt;user username=&quot;dirk&quot; password=&quot;dirk&quot; roles=&quot;manager-gui&quot;/&gt; 
</code></pre></div><p>where you can replace <code>dirk</code> and <code>dirk</code> by whatever you like.</p> <h2 id="blacklab"><a href="#blacklab" class="header-anchor">#</a> Blacklab</h2> <p>To see what Blacklab is, see
<a href="http://inl.github.io/BlackLab/index.html" target="_blank" rel="noopener noreferrer">blacklab intro<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>A working blacklab installation consists of a server, a client, and corpus data.</p> <h3 id="file-organization"><a href="#file-organization" class="header-anchor">#</a> File organization</h3> <p>The following bit of file organization is not rigidly prescribed.
You can also choose another organization.
Whatever you do, it needs to be reflected in subsequent config files and shell commands.</p> <p>This is an organization that I find convenient at this stage:</p> <div class="language- extra-class"><pre class="language-text"><code>blacklab/
         data/
              incoming/
              indexes/
         program/
         installation/
</code></pre></div><p>I have put it all under <code>~/local</code> i.e. my home directory and then
a subdirectory <code>blacklab</code>.</p> <h4 id="contents-and-downloads"><a href="#contents-and-downloads" class="header-anchor">#</a> Contents and downloads</h4> <p>The <code>data</code> directory will receive corpus data.</p> <p>The <code>incoming</code> subdir receives downloaded data, the <code>indexes</code> subdir is the destination
of the blacklab indexer.</p> <p>The <code>installation</code> directory receives the downloaded <code>blacklab-server-2.1.0</code> war file.</p> <p>This file is attached to a release of the Blacklab repo.
The releases are listed
<a href="https://github.com/INL/BlackLab/releases/" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
and we pick release 2.1.0.
You see a file
<a href="https://github.com/INL/BlackLab/releases/download/v2.1.0/blacklab-server-2.1.0.war" target="_blank" rel="noopener noreferrer">blacklab-server-2.1.0.war<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
there, download it and place it in the <code>installation</code> directory.</p> <p>We will unzip it in place, and copy its <code>WEB-INF/lib</code> directory to the <code>program</code> directory.</p> <p>Over there, we move the <code>blacklab-2.1.0.jar</code> file one level up, so that it is directly beneath
the <code>program</code> dir.</p> <p>When we <code>cd</code> to the program dir, we can easily run the java program in the blacklab jar file,
supported by the libraries in the jar files under the <code>lib</code> subdirectory.</p> <p>We'll need the blacklab program soon: for indexing the first corpus.</p> <p>We also need to download a front-end, a.k.a. client.
This is in the
<a href="https://github.com/INL/corpus-frontend" target="_blank" rel="noopener noreferrer">INL/corpus-frontend<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> repo.
Again, move to the
<a href="https://github.com/INL/corpus-frontend/releases" target="_blank" rel="noopener noreferrer">releases<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
page and there you find release 2.1.0.
You see a file
<a href="https://github.com/INL/corpus-frontend/releases/download/v2.1.0/corpus-frontend-2.1.0.war" target="_blank" rel="noopener noreferrer">corpus-frontend-2.1.0.war<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
there, download it and place it in the <code>installation</code> directory.</p> <h3 id="server"><a href="#server" class="header-anchor">#</a> Server</h3> <p>See
<a href="/BlackLab/server/" class="router-link-active">blacklab-server overview</a></p> <h4 id="configure"><a href="#configure" class="header-anchor">#</a> Configure</h4> <p>Set an environment variable to point to the blacklab server config, do
this in your <code>.zshrc</code> file.</p> <p>Note that <code>~</code> will not work properly, so spell out the complete path
from the root of your system to the directory where your blacklab config dir is:</p> <div class="language- extra-class"><pre class="language-text"><code>BLACKLAB_CONFIG_DIR=&quot;/Users/dirk/local/blacklab&quot;
export BLACKLAB_CONFIG_DIR
</code></pre></div><p>Then edit/create a server config file:</p> <div class="language- extra-class"><pre class="language-text"><code>cd ~/local/blacklab
vim blacklab-server.yaml
</code></pre></div><p>and add the contents</p> <div class="language- extra-class"><pre class="language-text"><code>---
configVersion: 2

# Where indexes can be found
# (list directories whose subdirectories are indexes, or directories containing a single index)
indexLocations:
- /Users/dirk/local/blacklab/data/indexes
</code></pre></div><p><strong>N.B.</strong>
Note that in this config file you can not use the <code>~</code> abbreviation.</p> <p>Deploying the blacklab war now leads to a friendly message from blacklab that there are no indexes.
So, before we deploy, we create the indexes for an example corpus and put it in place.</p> <h4 id="example-data"><a href="#example-data" class="header-anchor">#</a> Example data</h4> <p>We download the
<a href="https://github.com/INL/BlackLab/wiki/brownCorpus.lemmatized.xml.zip" target="_blank" rel="noopener noreferrer">Brown corpus<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,
a single XML file of 66 MB when unzipped, to be put in <code>data/incoming</code>.</p> <p>Run the blacklab index tool by running the blacklab jar:</p> <div class="language- extra-class"><pre class="language-text"><code>cd ~/local/blacklab/program/
</code></pre></div><p>Then run the jar:</p> <div class="language- extra-class"><pre class="language-text"><code>java -cp &quot;blacklab-2.1.0.jar&quot; nl.inl.blacklab.tools.IndexTool create ~/local/blacklab/data/indexes/brown ~/local/blacklab/data/incoming/brownCorpus.lemmatized.xml tei
</code></pre></div><h4 id="deploy-within-tomcat"><a href="#deploy-within-tomcat" class="header-anchor">#</a> Deploy within Tomcat</h4> <p>In the terminal, give the command</p> <div class="language- extra-class"><pre class="language-text"><code>catalina start
</code></pre></div><p>Then, in the browser navigate (again) to</p> <p>http://localhost:8080</p> <p>Click the manage app and login with <code>dirk</code>, <code>dirk</code> (which is what have have put in the
TomCat config file for users, above).</p> <p>In the list of applications, click the blacklab-server-2.1.0 entry.</p> <p>You should see something like:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blacklabResponse</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blacklabBuildTime</span><span class="token punctuation">&gt;</span></span>2020-06-22 16:01:41<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blacklabBuildTime</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blacklabVersion</span><span class="token punctuation">&gt;</span></span>2.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blacklabVersion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>indices</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>index</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brown<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>displayName</span><span class="token punctuation">&gt;</span></span>brown<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>displayName</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>status</span><span class="token punctuation">&gt;</span></span>available<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>status</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>documentFormat</span><span class="token punctuation">&gt;</span></span>tei<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>documentFormat</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>timeModified</span><span class="token punctuation">&gt;</span></span>2020-11-24 11:47:37<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>timeModified</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tokenCount</span><span class="token punctuation">&gt;</span></span>1008320<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tokenCount</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>index</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>indices</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>loggedIn</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>loggedIn</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canCreateIndex</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canCreateIndex</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>user</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blacklabResponse</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>which means that all is well and that the Brown corpus indexes have been found.</p> <h4 id="test-the-query-tool"><a href="#test-the-query-tool" class="header-anchor">#</a> Test the query tool</h4> <p>Still in the <code>program</code> directory you can run the query tool:</p> <div class="language- extra-class"><pre class="language-text"><code>java -cp blacklab-2.1.0.jar nl.inl.blacklab.tools.QueryTool ~/local/blacklab/data/indexes/brown
</code></pre></div><p>You get a prompt <code>CorpusQL&gt;</code>.
Enter the query <code>&quot;egg&quot;</code> followed by a newline.</p> <p>You get results.
Exit by giving the command <code>exit</code>.</p> <div class="language- extra-class"><pre class="language-text"><code>CorpusQL&gt; &quot;egg&quot;
   1. [0106]               is thick , much like an [egg] plant?s skin , so that poison
   2. [0115]                it with beaten yolk of [egg]
   3. [0144]        kitchen for coffee grounds and [egg] shells . All these materials and
   4. [0303]            On this , she builds an `` [egg] compartment ?? or `` egg cell ?? which
   5. [0303] builds an `` egg compartment ?? or `` [egg] cell ?? which is filled with
   6. [0303]             the beebread loaf and the [egg] compartment is closed . The queen
   7. [0303]                  retires to a life of [egg] laying . The first worker bees
   8. [0303]      in unobtrusively , to deposit an [egg] on a completed loaf of
   9. [0303]        before the bumblebees seal the [egg] compartment . The hosts never seem
  10. [0303]             which is provided with an [egg] plus a store of beebread
  11. [0332]              with the chicken and the [egg] . Which came first ? ? Is it
  12. [0400]    constructed a highboard around the [egg] case which he had placed
12 hits in 6 documents
105 ms elapsed
CorpusQL&gt; exit
dirk:~/local/blacklab/program &gt; 
</code></pre></div><h3 id="client"><a href="#client" class="header-anchor">#</a> Client</h3> <p>The main front-end for Blacklab is in a separate
<a href="https://github.com/INL/corpus-frontend/" target="_blank" rel="noopener noreferrer">GitHub repo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/INL/BlackLab/edit/dev/site/docs/server/install-macos.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/14/2023, 2:21:26 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/BlackLab/assets/js/app.ff7e0bdb.js" defer></script><script src="/BlackLab/assets/js/2.3a027c82.js" defer></script><script src="/BlackLab/assets/js/42.0465a6b1.js" defer></script>
  </body>
</html>
